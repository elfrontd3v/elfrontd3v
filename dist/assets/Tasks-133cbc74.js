import{r,V as we,u as re,a5 as ta,E as R,t as he,v as J,aA as aa,K as Qe,_ as k,H as ie,W as it,aF as lt,b3 as ct,aS as Ee,f as le,aR as na,aT as ut,J as ra,b4 as sa,b5 as Ye,b6 as oa,e as ia,R as dt,j as d,B as ne,C as xe,n as be,o as Te,p as la,q as Ze,y as ca,b7 as ua,A as da,b8 as fa,T as pa,m as L}from"./index-13de64b0.js";import{H as va}from"./HeaderSection-49e6ff6c.js";import{T as ma,i as et,C as ga,I as Ne}from"./index-06a89f92.js";import{E as ya,P as Ea,D as ft,v as tt}from"./v4-f882e75d.js";import{C as pt}from"./index-dbd3cd39.js";import{R as vt}from"./row-adcb8862.js";import"./statusUtils-7353cd91.js";var ha={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};const xa=ha;var mt=function(t,n){return r.createElement(we,re(re({},t),{},{ref:n,icon:xa}))};mt.displayName="CopyOutlined";const Ca=r.forwardRef(mt);var gt=function(t,n){return r.createElement(we,re(re({},t),{},{ref:n,icon:ya}))};gt.displayName="EditOutlined";const Sa=r.forwardRef(gt);var ba=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(s){e.addRange(s)}),t&&t.focus()}},Ta=ba,at={"text/plain":"Text","text/html":"Url",default:"Text"},Ra="Copy to clipboard: #{key}, Enter";function Oa(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function wa(e,t){var n,a,s,i,p,c,E=!1;t||(t={}),n=t.debug||!1;try{s=Ta(),i=document.createRange(),p=document.getSelection(),c=document.createElement("span"),c.textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(l){if(l.stopPropagation(),t.format)if(l.preventDefault(),typeof l.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var u=at[t.format]||at.default;window.clipboardData.setData(u,e)}else l.clipboardData.clearData(),l.clipboardData.setData(t.format,e);t.onCopy&&(l.preventDefault(),t.onCopy(l.clipboardData))}),document.body.appendChild(c),i.selectNodeContents(c),p.addRange(i);var h=document.execCommand("copy");if(!h)throw new Error("copy command was unsuccessful");E=!0}catch(l){n&&console.error("unable to copy using execCommand: ",l),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),E=!0}catch(u){n&&console.error("unable to copy using clipboardData: ",u),n&&console.error("falling back to prompt"),a=Oa("message"in t?t.message:Ra),window.prompt(a,e)}}finally{p&&(typeof p.removeRange=="function"?p.removeRange(i):p.removeAllRanges()),c&&document.body.removeChild(c),s()}return E}var Na=wa;const ka=ta(Na);var _a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};const Ia=_a;var yt=function(t,n){return r.createElement(we,re(re({},t),{},{ref:n,icon:Ia}))};yt.displayName="EnterOutlined";const Da=r.forwardRef(yt);var Pa=function(t){var n=t.prefixCls,a=t["aria-label"],s=t.className,i=t.style,p=t.direction,c=t.maxLength,E=t.autoSize,h=E===void 0?!0:E,l=t.value,u=t.onSave,v=t.onCancel,f=t.onEnd,y=t.component,x=t.enterIcon,D=x===void 0?r.createElement(Da,null):x,H=r.useRef(null),O=r.useRef(!1),K=r.useRef(),A=r.useState(l),V=R(A,2),B=V[0],N=V[1];r.useEffect(function(){N(l)},[l]),r.useEffect(function(){if(H.current&&H.current.resizableTextArea){var S=H.current.resizableTextArea.textArea;S.focus();var b=S.value.length;S.setSelectionRange(b,b)}},[]);var Z=function(b){var w=b.target;N(w.value.replace(/[\n\r]/g,""))},F=function(){O.current=!0},P=function(){O.current=!1},$=function(b){var w=b.keyCode;O.current||(K.current=w)},C=function(){u(B.trim())},ee=function(b){var w=b.keyCode,te=b.ctrlKey,se=b.altKey,Q=b.metaKey,U=b.shiftKey;K.current===w&&!O.current&&!te&&!se&&!Q&&!U&&(w===Qe.ENTER?(C(),f==null||f()):w===Qe.ESC&&v())},W=function(){C()},X=y?"".concat(n,"-").concat(y):"",I=he(n,"".concat(n,"-edit-content"),J({},"".concat(n,"-rtl"),p==="rtl"),s,X);return r.createElement("div",{className:I,style:i},r.createElement(ma,{ref:H,maxLength:c,value:B,onChange:Z,onKeyDown:$,onKeyUp:ee,onCompositionStart:F,onCompositionEnd:P,onBlur:W,"aria-label":a,rows:1,autoSize:h}),D!==null?aa(D,{className:"".concat(n,"-edit-content-confirm")}):null)};const $a=Pa;function Re(e,t){return r.useMemo(function(){var n=!!e;return[n,k(k({},t),n&&ie(e)==="object"?e:null)]},[e])}var ja=function(t,n){var a=r.useRef(!1);r.useEffect(function(){a.current?t():a.current=!0},n)};const La=ja;var Aa=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]]);return n},Ma=r.forwardRef(function(e,t){var n=e.prefixCls,a=e.component,s=a===void 0?"article":a,i=e.className,p=e.setContentRef,c=e.children,E=e.direction,h=Aa(e,["prefixCls","component","className","setContentRef","children","direction"]),l=r.useContext(it),u=l.getPrefixCls,v=l.direction,f=E??v,y=t;p&&(y=lt(t,p));var x=u("typography",n),D=he(x,J({},"".concat(x,"-rtl"),f==="rtl"),i);return r.createElement(s,k({className:D,ref:y},h),c)});const Et=Ma;function ht(e){var t=ie(e);return t==="string"||t==="number"}function za(e){var t=0;return e.forEach(function(n){ht(n)?t+=String(n).length:t+=1}),t}function nt(e,t){for(var n=0,a=[],s=0;s<e.length;s+=1){if(n===t)return a;var i=e[s],p=ht(i),c=p?String(i).length:1,E=n+c;if(E>t){var h=t-n;return a.push(String(i).slice(0,h)),a}a.push(i),n=E}return e}var Ha=0,me=1,rt=2,Oe=3,st=4,Ka=function(t){var n=t.enabledMeasure,a=t.children,s=t.text,i=t.width,p=t.fontSize,c=t.rows,E=t.onEllipsis,h=r.useState([0,0,0]),l=R(h,2),u=R(l[0],3),v=u[0],f=u[1],y=u[2],x=l[1],D=r.useState(Ha),H=R(D,2),O=H[0],K=H[1],A=r.useState(0),V=R(A,2),B=V[0],N=V[1],Z=r.useRef(null),F=r.useRef(null),P=r.useMemo(function(){return ct(s)},[s]),$=r.useMemo(function(){return za(P)},[P]),C=r.useMemo(function(){return!n||O!==Oe?a(P,!1):a(nt(P,f),f<$)},[n,O,a,P,f,$]);Ee(function(){n&&i&&p&&$&&(K(me),x([0,Math.ceil($/2),$]))},[n,i,p,s,$,c]),Ee(function(){var I;O===me&&N(((I=Z.current)===null||I===void 0?void 0:I.offsetHeight)||0)},[O]),Ee(function(){var I,S;if(B){if(O===me){var b=((I=F.current)===null||I===void 0?void 0:I.offsetHeight)||0,w=c*B;b<=w?(K(st),E(!1)):K(rt)}else if(O===rt)if(v!==y){var te=((S=F.current)===null||S===void 0?void 0:S.offsetHeight)||0,se=c*B,Q=v,U=y;v===y-1?U=v:te<=se?Q=f:U=f;var ue=Math.ceil((Q+U)/2);x([Q,ue,U])}else K(Oe),E(!0)}},[O,v,y,c,B]);var ee={width:i,whiteSpace:"normal",margin:0,padding:0},W=function(S,b,w){return r.createElement("span",{"aria-hidden":!0,ref:b,style:k({position:"fixed",display:"block",left:0,top:0,zIndex:-9999,visibility:"hidden",pointerEvents:"none",fontSize:Math.floor(p/2)*2},w)},S)},X=function(S,b){var w=nt(P,S);return W(a(w,!0),b,ee)};return r.createElement(r.Fragment,null,C,n&&O!==Oe&&O!==st&&r.createElement(r.Fragment,null,W("lg",Z,{wordBreak:"keep-all",whiteSpace:"nowrap"}),O===me?W(a(P,!1),F,ee):X(f,F)))};const Ba=Ka;var Va=function(t){var n=t.enabledEllipsis,a=t.isEllipsis,s=t.children,i=t.tooltipProps;return!(i!=null&&i.title)||!n?s:r.createElement(le,k({open:a?void 0:!1},i),s)};const Fa=Va;var Wa=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]]);return n};function Ua(e,t){var n=e.mark,a=e.code,s=e.underline,i=e.delete,p=e.strong,c=e.keyboard,E=e.italic,h=t;function l(u,v){u&&(h=r.createElement(v,{},h))}return l(p,"strong"),l(s,"u"),l(i,"del"),l(a,"code"),l(n,"mark"),l(c,"kbd"),l(E,"i"),h}function ge(e,t,n){return e===!0||e===void 0?t:e||n&&t}function ot(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}var qa="...",Ga=r.forwardRef(function(e,t){var n,a,s,i=e.prefixCls,p=e.className,c=e.style,E=e.type,h=e.disabled,l=e.children,u=e.ellipsis,v=e.editable,f=e.copyable,y=e.component,x=e.title,D=Wa(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),H=r.useContext(it),O=H.getPrefixCls,K=H.direction,A=na("Text")[0],V=r.useRef(null),B=r.useRef(null),N=O("typography",i),Z=ut(D,["mark","code","delete","underline","strong","keyboard","italic"]),F=Re(v),P=R(F,2),$=P[0],C=P[1],ee=ra(!1,{value:C.editing}),W=R(ee,2),X=W[0],I=W[1],S=C.triggerType,b=S===void 0?["icon"]:S,w=function(o){var g;o&&((g=C.onStart)===null||g===void 0||g.call(C)),I(o)};La(function(){var m;X||(m=B.current)===null||m===void 0||m.focus()},[X]);var te=function(o){o==null||o.preventDefault(),w(!0)},se=function(o){var g;(g=C.onChange)===null||g===void 0||g.call(C,o),w(!1)},Q=function(){var o;(o=C.onCancel)===null||o===void 0||o.call(C),w(!1)},U=Re(f),ue=R(U,2),Se=ue[0],Y=ue[1],Ct=r.useState(!1),Ie=R(Ct,2),de=Ie[0],De=Ie[1],Pe=r.useRef(),$e={};Y.format&&($e.format=Y.format);var je=function(){window.clearTimeout(Pe.current)},St=function(o){var g;o==null||o.preventDefault(),o==null||o.stopPropagation(),ka(Y.text||String(l)||"",$e),De(!0),je(),Pe.current=window.setTimeout(function(){De(!1)},3e3),(g=Y.onCopy)===null||g===void 0||g.call(Y,o)};r.useEffect(function(){return je},[]);var bt=r.useState(!1),Le=R(bt,2),Ae=Le[0],Tt=Le[1],Rt=r.useState(!1),Me=R(Rt,2),ze=Me[0],Ot=Me[1],wt=r.useState(!1),He=R(wt,2),Nt=He[0],kt=He[1],_t=r.useState(!1),Ke=R(_t,2),Be=Ke[0],It=Ke[1],Dt=r.useState(!1),Ve=R(Dt,2),Fe=Ve[0],Pt=Ve[1],$t=r.useState(!0),We=R($t,2),jt=We[0],Lt=We[1],At=Re(u,{expandable:!1}),Ue=R(At,2),q=Ue[0],T=Ue[1],M=q&&!Nt,qe=T.rows,ae=qe===void 0?1:qe,fe=r.useMemo(function(){return!M||T.suffix!==void 0||T.onEllipsis||T.expandable||$||Se},[M,T,$,Se]);Ee(function(){q&&!fe&&(Tt(et("webkitLineClamp")),Ot(et("textOverflow")))},[fe,q]);var z=r.useMemo(function(){return fe?!1:ae===1?ze:Ae},[fe,ze,Ae]),Ge=M&&(z?Fe:Be),Mt=M&&ae===1&&z,pe=M&&ae>1&&z,zt=function(o){var g;kt(!0),(g=T.onExpand)===null||g===void 0||g.call(T,o)},Ht=r.useState(0),Je=R(Ht,2),Kt=Je[0],Bt=Je[1],Vt=r.useState(0),Xe=R(Vt,2),Ft=Xe[0],Wt=Xe[1],Ut=function(o,g){var _=o.offsetWidth,j;Bt(_),Wt(parseInt((j=window.getComputedStyle)===null||j===void 0?void 0:j.call(window,g).fontSize,10)||0)},qt=function(o){var g;It(o),Be!==o&&((g=T.onEllipsis)===null||g===void 0||g.call(T,o))};r.useEffect(function(){var m=V.current;if(q&&z&&m){var o=pe?m.offsetHeight<m.scrollHeight:m.offsetWidth<m.scrollWidth;Fe!==o&&Pt(o)}},[q,z,l,pe,jt]),r.useEffect(function(){var m=V.current;if(!(typeof IntersectionObserver>"u"||!m||!z||!M)){var o=new IntersectionObserver(function(){Lt(!!m.offsetParent)});return o.observe(m),function(){o.disconnect()}}},[z,M]);var G={};T.tooltip===!0?G={title:(n=C.text)!==null&&n!==void 0?n:l}:r.isValidElement(T.tooltip)?G={title:T.tooltip}:ie(T.tooltip)==="object"?G=k({title:(a=C.text)!==null&&a!==void 0?a:l},T.tooltip):G={title:T.tooltip};var ve=r.useMemo(function(){var m=function(g){return["string","number"].includes(ie(g))};if(!(!q||z)){if(m(C.text))return C.text;if(m(l))return l;if(m(x))return x;if(m(G.title))return G.title}},[q,z,x,G.title,Ge]);if(X)return r.createElement($a,{value:(s=C.text)!==null&&s!==void 0?s:typeof l=="string"?l:"",onSave:se,onCancel:Q,onEnd:C.onEnd,prefixCls:N,className:p,style:c,direction:K,component:y,maxLength:C.maxLength,autoSize:C.autoSize,enterIcon:C.enterIcon});var Gt=function(){var o=T.expandable,g=T.symbol;if(!o)return null;var _;return g?_=g:_=A.expand,r.createElement("a",{key:"expand",className:"".concat(N,"-expand"),onClick:zt,"aria-label":A.expand},_)},Jt=function(){if($){var o=C.icon,g=C.tooltip,_=ct(g)[0]||A.edit,j=typeof _=="string"?_:"";return b.includes("icon")?r.createElement(le,{key:"edit",title:g===!1?"":_},r.createElement(Ye,{ref:B,className:"".concat(N,"-edit"),onClick:te,"aria-label":j},o||r.createElement(Sa,{role:"button"}))):null}},Xt=function(){if(Se){var o=Y.tooltips,g=Y.icon,_=ot(o),j=ot(g),oe=de?ge(_[1],A.copied):ge(_[0],A.copy),Zt=de?A.copied:A.copy,ea=typeof oe=="string"?oe:Zt;return r.createElement(le,{key:"copy",title:oe},r.createElement(Ye,{className:he("".concat(N,"-copy"),de&&"".concat(N,"-copy-success")),onClick:St,"aria-label":ea},de?ge(j[1],r.createElement(ga,null),!0):ge(j[0],r.createElement(Ca,null),!0)))}},Qt=function(o){return[o&&Gt(),Jt(),Xt()]},Yt=function(o){return[o&&r.createElement("span",{"aria-hidden":!0,key:"ellipsis"},qa),T.suffix,Qt(o)]};return r.createElement(sa,{onResize:Ut,disabled:!M||z},function(m){var o;return r.createElement(Fa,{tooltipProps:G,enabledEllipsis:M,isEllipsis:Ge},r.createElement(Et,k({className:he((o={},J(o,"".concat(N,"-").concat(E),E),J(o,"".concat(N,"-disabled"),h),J(o,"".concat(N,"-ellipsis"),q),J(o,"".concat(N,"-single-line"),M&&ae===1),J(o,"".concat(N,"-ellipsis-single-line"),Mt),J(o,"".concat(N,"-ellipsis-multiple-line"),pe),o),p),prefixCls:i,style:k(k({},c),{WebkitLineClamp:pe?ae:void 0}),component:y,ref:lt(m,V,t),direction:K,onClick:b.includes("text")?te:void 0,"aria-label":ve==null?void 0:ve.toString(),title:x},Z),r.createElement(Ba,{enabledMeasure:M&&!z,text:l,rows:ae,width:Kt,fontSize:Ft,onEllipsis:qt},function(g,_){var j=g;g.length&&_&&ve&&(j=r.createElement("span",{key:"show-content","aria-hidden":!0},j));var oe=Ua(e,r.createElement(r.Fragment,null,j,Yt(_)));return oe})))})});const Ce=Ga;var Ja=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]]);return n},Xa=r.forwardRef(function(e,t){var n=e.ellipsis,a=e.rel,s=Ja(e,["ellipsis","rel"]),i=k(k({},s),{rel:a===void 0&&s.target==="_blank"?"noopener noreferrer":a});return delete i.navigate,r.createElement(Ce,k({},i,{ref:t,ellipsis:!!n,component:"a"}))});const Qa=Xa;var Ya=r.forwardRef(function(e,t){return r.createElement(Ce,k({ref:t},e,{component:"div"}))});const Za=Ya;var en=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]]);return n},tn=function(t,n){var a=t.ellipsis,s=en(t,["ellipsis"]),i=r.useMemo(function(){return a&&ie(a)==="object"?ut(a,["expandable","rows"]):a},[a]);return r.createElement(Ce,k({ref:n},s,{ellipsis:i,component:"span"}))};const an=r.forwardRef(tn);var nn=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]]);return n},rn=oa(1,2,3,4,5),sn=r.forwardRef(function(e,t){var n=e.level,a=n===void 0?1:n,s=nn(e,["level"]),i;return rn.includes(a)?i="h".concat(a):i="h1",r.createElement(Ce,k({ref:t},s,{component:i}))});const on=sn;var ce=Et;ce.Text=an;ce.Link=Qa;ce.Title=on;ce.Paragraph=Za;const ln=ce;var cn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"check-square",theme:"outlined"};const un=cn;var dn=function(t,n){return r.createElement(ia,k({},t,{ref:n,icon:un}))};const fn=r.forwardRef(dn);class ke extends dt.Component{constructor(t){super(t),this.state={id:t.id?t.id:"",title:t.title?t.title:"",status:t.status?t.status:!1,date:t.date?t.date:Date.now()}}}class _e extends dt.Component{constructor(t){super(t),this.state={id:t.id?t.id:"",uid:t.uid?t.uid:"",title:t.title?t.title:"",tasksList:t.tasksList?t.tasksList:[],date:t.date?t.date:Date.now()}}}const{TextArea:pn}=Ne,xt=({generalDictionary:e,type:t,addHandle:n,listId:a})=>{const[s,i]=r.useState(!1),[p,c]=r.useState(""),E=()=>{p!==""&&(t==="CARD"?n(a,new ke({title:p,status:!0}).state):n(new _e({title:p}).state)),i(!1),c("")},h=()=>{i(!1),c("")};return d.jsx(d.Fragment,{children:s?d.jsxs("div",{className:"addTitleForm",children:[d.jsx(pn,{className:"inputTitle",size:"large",autoSize:!0,value:p,placeholder:t==="LIST"?e.ADD_TITLE:e.ADD_TASK,onChange:l=>c(l.target.value),onKeyPress:l=>{l.key==="Enter"&&E()},onBlur:h,autoFocus:!0}),d.jsx(ne,{onMouseDown:E,type:"primary",className:"addButtonConfirm",children:e.ADD}),d.jsx(ne,{className:"addButtonCancel",onMouseDown:h,type:"danger",children:e.CANCEL})]}):d.jsx(ne,{size:"large",type:"text",className:"addButton",icon:d.jsx(Ea,{}),onClick:()=>i(!0),children:t==="LIST"?e.ADD_LIST:e.ADD_TASK})})},{TextArea:vn}=Ne,{Text:mn}=ln,gn=({task:e,TaskMethods:t,listId:n})=>{const[a,s]=r.useState(!1),[i,p]=r.useState(!1),[c,E]=r.useState(e.title),[h,l]=r.useState(e.status),u=f=>{l(f),t.addTask(n,new ke({...e,title:c,status:f}).state),p(!1),s(!1)},v=()=>{t.deleteTask(n,e.id)};return d.jsx(d.Fragment,{children:d.jsx(pt,{className:"singleTask",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onBlur:()=>s(!1),children:d.jsxs(vt,{gutter:[8,8],className:"taskContainer",children:[d.jsx(xe,{span:21,onClick:()=>p(!0),children:i?d.jsx(vn,{autoSize:!0,value:c,autoFocus:!0,onBlur:()=>p(!1),onChange:f=>E(f.target.value),onKeyPress:f=>{f.key==="Enter"&&u(!0)}}):d.jsx(mn,{className:"spanText",delete:!h,children:c})}),d.jsx(xe,{span:3,children:a&&d.jsxs(d.Fragment,{children:[d.jsx(le,{placement:"right",title:h?"Marcar como terminada":"Desmarcar",children:d.jsx(ne,{type:"text",size:"small",onMouseDown:()=>u(!h),children:d.jsx(fn,{})})}),d.jsx(le,{placement:"right",title:"Eliminar",children:d.jsx(ne,{type:"text",size:"small",onMouseDown:v,children:d.jsx(ft,{})})})]})})]})},e.id)})};const{TextArea:yn}=Ne,En=({list:e,generalDictionary:t,ListMethods:n,TaskMethods:a})=>{var u,v;const[s,i]=r.useState(!1),[p,c]=r.useState(e.title),E=()=>{p!==""?n.addTasksList(new _e({...e,title:p}).state):c(e.title),i(!1)},h=()=>{c(e.title),i(!1)},l=()=>{n.deleteTasksList(e.id)};return d.jsx(d.Fragment,{children:d.jsxs(pt,{className:"tasksListContainer",title:s?d.jsx(yn,{autoSize:!0,value:p,autoFocus:!0,onBlur:()=>h(),onChange:f=>c(f.target.value),onKeyPress:f=>{f.key==="Enter"&&E()}}):d.jsx("span",{onClick:()=>i(!0),children:p}),extra:d.jsx(d.Fragment,{children:d.jsx(ne,{type:"text",onClick:l,children:d.jsx(ft,{})})}),children:[((u=e.tasksList)==null?void 0:u.length)>0&&((v=e.tasksList)==null?void 0:v.map(f=>d.jsx(gn,{task:f,TaskMethods:a,listId:e.id},f.id))),d.jsx(xt,{generalDictionary:t,type:"CARD",addHandle:a.addTask,listId:e.id})]})})},ye={insertTasksList:async e=>{const t=be(Te,`tasks/${e.id}`);return await la(t,e),(await Ze(t)).data()},deleteTasksListById:async e=>{const t=be(Te,`tasks/${e}`);return await ca(t),!0},insertTask:async(e,t)=>{const n=be(Te,`tasks/${e}`);return await ua(n,{tasksList:t}),(await Ze(n)).data()}},hn=()=>{const[e]=r.useContext(da),[t]=r.useContext(fa),[n]=r.useContext(pa),{generalDictionary:a}=n,[s,i]=r.useState([]);r.useEffect(()=>{e!=null&&e.uid&&(t!=null&&t.list)&&i(t.list)},[e,t]);const p=u=>{var f;const v=new _e({id:u.id?u.id:tt(),uid:u.uid?u.uid:e.uid,title:u.title,date:u.date?u.date:Date.now(),tasksList:((f=u==null?void 0:u.tasksList)==null?void 0:f.length)>0?u.tasksList:[]}).state;ye.insertTasksList(v).then(y=>{y&&y.id?L.success(u.id?a.ENDPOINT_UPDATE_OK:a.ENDPOINT_INSERT_OK,.5):L.warning(a.ENDPOINT_WARNING,.5)}).catch(y=>{console.error("error:",y),L.error(a.ENDPOINT_ERROR,.5)})},c=u=>{ye.deleteTasksListById(u).then(v=>{v?L.success(a.ENDPOINT_DELETE,.5):L.success(a.ENDPOINT_WARNING,.5)}).catch(v=>{console.error("error:",v),L.error(a.ENDPOINT_ERROR,.5)})},E=(u,v)=>{const f=l(u,v);ye.insertTask(u,f).then(y=>{y&&y.id?L.success(a.ENDPOINT_DELETE,.5):L.warning(a.ENDPOINT_WARNING,.5)}).catch(y=>{console.error("error:",y),L.error(a.ENDPOINT_ERROR,.5)})},h=(u,v)=>{const f=new ke({id:v.id?v.id:tt(),title:v.title?v.title:"",status:v.status?v.status:!1,date:v.date?v.date:Date.now()}).state,y=l(u,f.id);y.push(f),y.sort((x,D)=>x.date-D.date),y.sort((x,D)=>D.status-x.status),ye.insertTask(u,y).then(x=>{x&&x.id?L.success(v.id?a.ENDPOINT_UPDATE_OK:a.ENDPOINT_INSERT_OK,.5):L.warning(a.ENDPOINT_WARNING,.5)}).catch(x=>{console.error("error:",x),L.error(a.ENDPOINT_ERROR,.5)})},l=(u,v)=>{let f=[];return t.list.forEach(y=>{y.id===u&&(f=y.tasksList.filter(x=>x.id!==v))}),f};return{tasksData:s,generalDictionary:a,ListMethods:{addTasksList:p,deleteTasksList:c},TaskMethods:{addTask:h,deleteTask:E}}};const wn=()=>{const{tasksData:e,generalDictionary:t,ListMethods:n,TaskMethods:a}=hn();return d.jsxs(d.Fragment,{children:[d.jsx(va,{title:t.TASKS}),d.jsxs(vt,{gutter:[8,8],children:[e==null?void 0:e.map(s=>d.jsx(xe,{xs:24,sm:24,md:12,lg:8,xl:8,xxl:6,children:d.jsx(En,{list:s,generalDictionary:t,ListMethods:n,TaskMethods:a})},s.id)),d.jsx(xe,{xs:24,sm:24,md:12,lg:8,xl:8,xxl:6,children:d.jsx(xt,{generalDictionary:t,type:"LIST",addHandle:n.addTasksList})})]})]})};export{wn as default};
